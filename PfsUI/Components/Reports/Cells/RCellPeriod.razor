@namespace PfsUI.Components

@using Pfs.Types

<!-- Implementation: RCellPeriod -->
@FormatPeriod()

@code {
    [Parameter] public DateOnly From { get; set; }
    [Parameter] public DateOnly? To { get; set; }

    string FormatPeriod()
    {
        DateOnly to = DateOnly.FromDateTime(DateTime.Now);

        if ( To.HasValue)
            to = To.Value;

        int months = (int)((to.DayNumber - From.DayNumber) / 30.437);

        if (months < 12)
            return months.ToString() + "m";

        if (months < 36)
            return (months / 12).ToString() + "y" + (months % 12 != 0 ? (months % 12).ToString() + "m" : "");

        return (months / 12).ToString() + "y";
    }
}
